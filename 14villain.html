<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—´ ë„¤ë²ˆì˜ ê¸°íšŒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;800&display=swap');
        /* ëª¨ë°”ì¼ì—ì„œ ì „ì²´ ìŠ¤í¬ë¡¤ì´ ê°€ëŠ¥í•˜ë„ë¡ overflow ìˆ˜ì • */
        body { font-family: 'Pretendard', sans-serif; -webkit-user-select: none; user-select: none; overflow-y: auto; overflow-x: hidden; }
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.3); }
        .bg-mesh { background: radial-gradient(at 0% 0%, #ff9a9e 0, transparent 50%), radial-gradient(at 100% 0%, #fad0c4 0, transparent 50%); background-color: #fce4ec; }
        .q-card { transition: all 0.2s; cursor: pointer; border: 1px solid #e2e8f0; }
        .q-card:hover { transform: translateY(-2px); border-color: #3b82f6; background: #eff6ff; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-mesh min-h-screen flex items-center justify-center p-4">

    <div id="app" class="max-w-md w-full glass rounded-[2.5rem] shadow-2xl p-6 space-y-4 relative border border-white my-8">
        <div class="space-y-2">
            <div class="flex justify-between items-end">
                <div>
                    <h1 class="text-3xl font-800 text-slate-800 tracking-tight">ì—´ ë„¤ë²ˆì˜ ê¸°íšŒ</h1>
                    <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">ì°¸ì˜ ì‹ , ê±°ì§“ì˜ ì‹ , ë³€ë•ì˜ ì‹ </p>
                </div>
                <div class="text-right">
                    <p id="turn-txt" class="text-xs font-bold text-rose-500">ì§ˆë¬¸ 14/14</p>
                    <p id="attempt-txt" class="text-xs font-bold text-slate-400">ëª©ìˆ¨ 14/14</p>
                </div>
            </div>
            <div class="w-full bg-slate-100 h-2 rounded-full overflow-hidden">
                <div id="p-bar" class="bg-gradient-to-r from-rose-400 to-orange-400 h-full w-full transition-all duration-700"></div>
            </div>
        </div>

        <div id="q-area" class="space-y-2">
            <p class="text-[11px] font-bold text-slate-400 px-1">ì •ë‹µì€ 0~99 ì‚¬ì´ì˜ ìˆ«ìì…ë‹ˆë‹¤. ì§ˆë¬¸ì„ ì„ íƒí•˜ì—¬ ì„¸ ì‹ ë“¤ì˜ ëŒ€ë‹µì„ ë“¤ìœ¼ì„¸ìš”.</p>
            <div id="q-container" class="grid gap-2"></div>
        </div>

        <div class="bg-slate-50/80 rounded-[1.5rem] p-4 min-h-[200px] max-h-[450px] overflow-y-auto border border-slate-200/50 shadow-inner">
            <div id="history" class="space-y-3 text-sm">
                <div class="text-center text-slate-400 py-10 italic text-xs">
                    ì„¸ ëª…ì˜ ì‹  ì¤‘ í•œ ëª…ì€ í•­ìƒ ì§„ì‹¤ì„,<br>í•œ ëª…ì€ í•­ìƒ ê±°ì§“ì„, í•œ ëª…ì€ í•­ìƒ ë³€ë•ìœ¼ë¡œ ë‹µí•©ë‹ˆë‹¤.<br>ëˆ„ê°€ ëˆ„êµ¬ì¸ì§€ ì•Œì•„ë‚´ëŠ” ì§ˆë¬¸ì„ í†µí•´ ë‹µì„ ì°¾ìœ¼ì„¸ìš”.
                </div>
            </div>
        </div>

        <div class="space-y-3">
            <div class="relative group">
                <input type="number" id="guess-input" placeholder="0~99 ì‚¬ì´ì˜ ìˆ«ìëŠ”?" 
                    class="w-full px-6 py-4 rounded-2xl border-2 border-transparent bg-white shadow-sm focus:border-rose-300 outline-none transition-all text-slate-700 font-bold text-center text-xl">
                <button onclick="checkAnswer()" class="absolute right-2 top-2 bottom-2 bg-slate-900 text-white px-5 rounded-xl font-bold hover:bg-rose-600 transition-colors">í™•ì¸</button>
            </div>
            <button id="giveup-btn" onclick="showModal('giveup')" class="w-full text-slate-400 text-[10px] font-bold uppercase tracking-widest hover:text-rose-500 transition-colors hidden">
                ì§„ì‹¤ì„ ê°ë‹¹í•  ìˆ˜ ì—†ë‚˜ìš”? í¬ê¸°í•˜ê¸°
            </button>
        </div>
    </div>

    <div id="modal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm hidden items-center justify-center p-6 z-50">
        <div class="bg-white rounded-[3rem] p-8 max-w-sm w-full text-center space-y-6 shadow-2xl animate-in zoom-in-95 duration-300">
            <div id="m-icon" class="text-6xl"></div>
            <div class="space-y-2">
                <h2 id="m-title" class="text-2xl font-800 text-slate-800"></h2>
                <p id="m-desc" class="text-slate-500 text-sm font-medium"></p>
            </div>
            <div class="space-y-2">
                <div id="m-answer" class="bg-rose-50 text-rose-600 p-3 rounded-2xl font-mono font-800 text-xl border border-rose-100"></div>
                <div id="m-code" class="bg-slate-900 text-emerald-400 p-3 rounded-2xl font-mono font-bold text-sm border border-slate-700"></div>
            </div>
            <button onclick="restartGame()" class="w-full py-4 bg-slate-900 text-white rounded-2xl font-bold">ë‹¤ì‹œ ë„ì „</button>
        </div>
    </div>

    <script>
        let targetNumber = 0;
        let turns = 14;
        let lives = 14;
        let godRoles = {};

        const RESULT_CODES = {
            win: "cmVndWxhdGlvbg==",
            fail: "bXl3aHlieQ==",
            giveup: "bXl3aHlieQ=="
        };

        const QUESTION_POOL = [
            { text: "2ì˜ ë°°ìˆ˜ì¸ê°€ìš”?", check: (n) => n % 2 === 0 },
            { text: "3ì˜ ë°°ìˆ˜ì¸ê°€ìš”?", check: (n) => n % 3 === 0 },
            { text: "4ì˜ ë°°ìˆ˜ì¸ê°€ìš”?", check: (n) => n % 4 === 0 },
            { text: "5ì˜ ë°°ìˆ˜ì¸ê°€ìš”?", check: (n) => n % 5 === 0 },
            { text: "7ì˜ ë°°ìˆ˜ì¸ê°€ìš”?", check: (n) => n % 7 === 0 },
            { text: "10ì˜ ë°°ìˆ˜ì¸ê°€ìš”?", check: (n) => n % 10 === 0 },
            { text: "14ì˜ ë°°ìˆ˜ì¸ê°€ìš”?", check: (n) => n % 14 === 0 },
            { text: "ì†Œìˆ˜(Prime Number)ì¸ê°€ìš”?", check: (n) => {
                if (n < 2) return false;
                for (let i = 2; i <= Math.sqrt(n); i++) if (n % i === 0) return false;
                return true;
            }},
            { text: "50ë³´ë‹¤ í°ê°€ìš”?", check: (n) => n > 50 },
            { text: "14ë³´ë‹¤ í°ê°€ìš”?", check: (n) => n > 14 },    
            { text: "14ë³´ë‹¤ ì‘ì€ê°€ìš”?", check: (n) => n < 14 },
            { text: "14ì¸ê°€ìš”?", check: (n) => n === 14 },     
            { text: "25ë³´ë‹¤ ì‘ì€ê°€ìš”?", check: (n) => n < 25 },
            { text: "75ë³´ë‹¤ í°ê°€ìš”?", check: (n) => n > 75 },
            { text: "ë‘ ìë¦¬ ìˆ˜ì¸ê°€ìš”?", check: (n) => n >= 10 },
            { text: "ë‘ ìë¦¿ìˆ˜ê°€ ì„œë¡œ ê°™ë‚˜ìš”? (11, 22...)", check: (n) => n >= 10 && Math.floor(n/10) === n%10 },
            { text: "ì‹­ì˜ ìë¦¬ ìˆ«ìê°€ ì§ìˆ˜ì¸ê°€ìš”?", check: (n) => Math.floor(n/10) % 2 === 0 },
            { text: "ì¼ì˜ ìë¦¬ ìˆ«ìê°€ ì‹­ì˜ ìë¦¬ë³´ë‹¤ í°ê°€ìš”?", check: (n) => (n % 10) > Math.floor(n/10) },
            { text: "ê° ìë¦¿ìˆ˜ì˜ í•©ì´ 10 ì´ìƒì¸ê°€ìš”?", check: (n) => Math.floor(n/10) + (n % 10) >= 10 },
            { text: "ê° ìë¦¿ìˆ˜ì˜ ê³±ì´ 20ë³´ë‹¤ í°ê°€ìš”?", check: (n) => Math.floor(n/10) * (n % 10) > 20 },
            { text: "í™€ìˆ˜ì¸ê°€ìš”?", check: (n) => n % 2 !== 0 },
            { text: "ì™„ì „ì œê³±ìˆ˜ì¸ê°€ìš”? (1, 4, 9, 16...)", check: (n) => Math.sqrt(n) % 1 === 0 },
            { text: "10ë³´ë‹¤ ì‘ì€ê°€ìš”?", check: (n) => n < 10 },
            { text: "30~40 ì‚¬ì´ì˜ ìˆ«ìì¸ê°€ìš”?", check: (n) => n >= 30 && n <= 40 },
            { text: "80~99 ì‚¬ì´ì˜ ìˆ«ìì¸ê°€ìš”?", check: (n) => n >= 80 && n <= 99 },
            { text: "6ì˜ ë°°ìˆ˜ì¸ê°€ìš”?", check: (n) => n % 6 === 0 },
            { text: "9ì˜ ë°°ìˆ˜ì¸ê°€ìš”?", check: (n) => n % 9 === 0 },
            { text: "ìˆ«ìì— '5'ê°€ ë“¤ì–´ê°€ë‚˜ìš”?", check: (n) => String(n).includes('5') },
            { text: "ìˆ«ìì— '3'ì´ ë“¤ì–´ê°€ë‚˜ìš”?", check: (n) => String(n).includes('3') },
            { text: "ìˆ«ìì— '7'ì´ ë“¤ì–´ê°€ë‚˜ìš”?", check: (n) => String(n).includes('7') },
            { text: "ìˆ«ìì— '0'ì´ ë“¤ì–´ê°€ë‚˜ìš”?", check: (n) => String(n).includes('0') },
            { text: "ì¼ì˜ ìë¦¬ê°€ 0ì¸ê°€ìš”?", check: (n) => n % 10 === 0 },
            { text: "ì‹­ì˜ ìë¦¬ê°€ 5ì¸ê°€ìš”?", check: (n) => Math.floor(n/10) === 5 },
            { text: "í•©ê³„ê°€ 5ì˜ ë°°ìˆ˜ì¸ê°€ìš”?", check: (n) => (Math.floor(n/10) + (n%10)) % 5 === 0 },
            { text: "ìë¦¿ìˆ˜ë¥¼ ë°”ê¾¸ë©´ ë” ì»¤ì§€ë‚˜ìš”?", check: (n) => (n % 10 * 10 + Math.floor(n/10)) > n },
            { text: "12ë³´ë‹¤ í°ê°€ìš”?", check: (n) => n > 12 },
            { text: "60ë³´ë‹¤ ì‘ì€ê°€ìš”?", check: (n) => n < 60 },
            { text: "15ì˜ ë°°ìˆ˜ì¸ê°€ìš”?", check: (n) => n % 15 === 0 },
            { text: "8ì˜ ë°°ìˆ˜ì¸ê°€ìš”?", check: (n) => n % 8 === 0 },
            { text: "ë‘ ìˆ«ìì˜ ì°¨ì´ê°€ 2 ì´í•˜ì¸ê°€ìš”?", check: (n) => Math.abs(Math.floor(n/10) - (n%10)) <= 2 },
            { text: "ë‘ ìˆ«ìì˜ ì°¨ì´ê°€ 5 ì´ìƒì¸ê°€ìš”?", check: (n) => Math.abs(Math.floor(n/10) - (n%10)) >= 5 },
            { text: "ì§ìˆ˜ì´ë©´ì„œ 10ë³´ë‹¤ í°ê°€ìš”?", check: (n) => n % 2 === 0 && n > 10 },
            { text: "3ì˜ ë°°ìˆ˜ì´ë©´ì„œ í™€ìˆ˜ì¸ê°€ìš”?", check: (n) => n % 3 === 0 && n % 2 !== 0 },
            { text: "20 ë¯¸ë§Œì¸ê°€ìš”?", check: (n) => n < 20 },
            { text: "40 ì´ˆê³¼ì¸ê°€ìš”?", check: (n) => n > 40 },
            { text: "ìˆ«ìë¥¼ ë’¤ì§‘ì–´ë„ ì†Œìˆ˜ì¸ê°€ìš”?", check: (n) => {
                let rev = (n % 10 * 10 + Math.floor(n/10));
                if (rev < 2) return false;
                for (let i = 2; i <= Math.sqrt(rev); i++) if (rev % i === 0) return false;
                return true;
            }},
            { text: "ì¼ì˜ ìë¦¬ê°€ 1, 3, 5, 7, 9 ì¤‘ í•˜ë‚˜ì¸ê°€ìš”?", check: (n) => [1,3,5,7,9].includes(n%10) },
            { text: "ì‹­ì˜ ìë¦¬ê°€ 1, 2, 3 ì¤‘ í•˜ë‚˜ì¸ê°€ìš”?", check: (n) => [1,2,3].includes(Math.floor(n/10)) },
            { text: "ì–‘ì˜ ìë¦¬ ìˆ«ìê°€ ì„œë¡œ ë‹¤ë¥¸ê°€ìš”?", check: (n) => Math.floor(n/10) !== n%10 },
            { text: "ìˆ«ìì˜ í•©ì´ ì§ìˆ˜ì¸ê°€ìš”?", check: (n) => (Math.floor(n/10) + n%10) % 2 === 0 },
            { text: "5ë¡œ ë‚˜ëˆ„ë©´ ë‚˜ë¨¸ì§€ê°€ 1ì¸ê°€ìš”?", check: (n) => n % 5 === 1 },
            { text: "5ë¡œ ë‚˜ëˆ„ë©´ ë‚˜ë¨¸ì§€ê°€ 2ì¸ê°€ìš”?", check: (n) => n % 5 === 2 },
            { text: "5ë¡œ ë‚˜ëˆ„ë©´ ë‚˜ë¨¸ì§€ê°€ 3ì¸ê°€ìš”?", check: (n) => n % 5 === 3 },
            { text: "5ë¡œ ë‚˜ëˆ„ë©´ ë‚˜ë¨¸ì§€ê°€ 4ì¸ê°€ìš”?", check: (n) => n % 5 === 4 },
            { text: "15ë¡œ ë‚˜ëˆ„ë©´ ë‚˜ë¨¸ì§€ê°€ 14ì¸ê°€ìš”?", check: (n) => n % 15 === 14 },
            { text: "16ìœ¼ë¡œ ë‚˜ëˆ„ë©´ ë‚˜ë¨¸ì§€ê°€ 14ì¸ê°€ìš”?", check: (n) => n % 16 === 14 },
            { text: "17ë¡œ ë‚˜ëˆ„ë©´ ë‚˜ë¨¸ì§€ê°€ 14ì¸ê°€ìš”?", check: (n) => n % 17 === 14 },
            { text: "18ë¡œ ë‚˜ëˆ„ë©´ ë‚˜ë¨¸ì§€ê°€ 14ì¸ê°€ìš”?", check: (n) => n % 18 === 14 },
            { text: "19ë¡œ ë‚˜ëˆ„ë©´ ë‚˜ë¨¸ì§€ê°€ 14ì¸ê°€ìš”?", check: (n) => n % 19 === 14 },
           { text: "20ìœ¼ë¡œ ë‚˜ëˆ„ë©´ ë‚˜ë¨¸ì§€ê°€ 14ì¸ê°€ìš”?", check: (n) => n % 20 === 14 },
            { text: "ìˆ«ìê°€ 0ì¸ê°€ìš”?", check: (n) => n === 0 }
        ];

        function initGame() {
            targetNumber = Math.floor(Math.random() * 100);
            turns = 14;
            lives = 14;
            const roles = ['truth', 'liar', 'random'].sort(() => Math.random() - 0.5);
            godRoles = { 'A': roles[0], 'B': roles[1], 'C': roles[2] };
            document.getElementById('history').innerHTML = '';
            updateUI();
            drawQuestions();
        }

        function drawQuestions() {
            const container = document.getElementById('q-container');
            container.innerHTML = '';
            if (turns <= 0) {
                container.innerHTML = '<p class="text-center text-rose-500 font-bold py-2">ì§ˆë¬¸ ê¸°íšŒë¥¼ ëª¨ë‘ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤!</p>';
                return;
            }
            const shuffled = [...QUESTION_POOL].sort(() => 0.5 - Math.random()).slice(0, 3);
            shuffled.forEach(q => {
                const btn = document.createElement('div');
                btn.className = "q-card bg-white p-3 rounded-xl flex justify-between items-center text-xs font-bold text-slate-600 shadow-sm";
                btn.innerHTML = `<span>${q.text}</span> <i data-lucide="help-circle" class="w-4 h-4 text-slate-300"></i>`;
                btn.onclick = () => askGods(q);
                container.appendChild(btn);
            });
            lucide.createIcons();
        }

        function askGods(q) {
            if (turns <= 0) return;
            turns--;
            const realAns = q.check(targetNumber);
            const results = {};
            ['A', 'B', 'C'].forEach(name => {
                const role = godRoles[name];
                if (role === 'truth') results[name] = realAns ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤';
                else if (role === 'liar') results[name] = realAns ? 'ì•„ë‹ˆì˜¤' : 'ì˜ˆ';
                else results[name] = Math.random() > 0.5 ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤';
            });
            const hist = document.getElementById('history');
            const item = document.createElement('div');
            item.className = "space-y-2 animate-in slide-in-from-bottom-2 duration-300 pb-2";
            item.innerHTML = `
                <div class="flex items-center gap-2">
                    <span class="bg-slate-200 text-slate-600 px-2 py-0.5 rounded text-[9px] font-bold italic">Q.${14-turns}</span>
                    <span class="text-slate-700 font-bold text-xs">${q.text}</span>
                </div>
                <div class="grid grid-cols-3 gap-1.5">
                    ${['A', 'B', 'C'].map(name => `
                        <div class="bg-white p-1.5 rounded-lg border border-slate-100 shadow-sm text-center">
                            <div class="text-[8px] font-black text-slate-400 mb-0.5">GOD ${name}</div>
                            <div class="font-800 text-sm ${results[name] === 'ì˜ˆ' ? 'text-blue-500' : 'text-rose-500'}">${results[name]}</div>
                        </div>
                    `).join('')}
                </div>
                <hr class="border-slate-100 mt-2">
            `;
            hist.prepend(item);
            updateUI();
            drawQuestions();
        }

        function updateUI() {
            document.getElementById('turn-txt').innerText = `ì§ˆë¬¸ ${turns}/14`;
            document.getElementById('attempt-txt').innerText = `ëª©ìˆ¨ ${lives}/14`;
            document.getElementById('p-bar').style.width = `${(turns / 14) * 100}%`;
            if (turns === 0) document.getElementById('giveup-btn').classList.remove('hidden');
        }

        function checkAnswer() {
            const input = document.getElementById('guess-input');
            const val = parseInt(input.value);
            if (isNaN(val)) return;
            if (val === targetNumber) {
                showModal('win');
            } else {
                lives--;
                updateUI();
                if (lives <= 0) showModal('fail');
                else alert(`ì˜¤ë‹µì…ë‹ˆë‹¤! ë‚¨ì€ ëª©ìˆ¨: ${lives}ë²ˆ`);
            }
            input.value = '';
        }

        function showModal(type) {
            const m = document.getElementById('modal');
            const ansBox = document.getElementById('m-answer');
            const codeBox = document.getElementById('m-code');
            m.classList.replace('hidden', 'flex');

            ansBox.innerText = `ì •ë‹µ: ${targetNumber}`;
            codeBox.innerText = `CODE: ${atob(RESULT_CODES[type])}`;

            if (type === 'win') {
                document.getElementById('m-icon').innerText = 'ğŸ‰';
                document.getElementById('m-title').innerText = 'ìŠ¹ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤!';
                document.getElementById('m-desc').innerText = 'ì§„ì‹¤ì˜ ëª©ì†Œë¦¬ë¥¼ ì™„ë²½íˆ ê°€ë ¤ë‚´ì…¨ìŠµë‹ˆë‹¤.';
            } else if (type === 'fail') {
                document.getElementById('m-icon').innerText = 'ğŸ’€';
                document.getElementById('m-title').innerText = 'GAME OVER';
                document.getElementById('m-desc').innerText = 'ê±°ì§“ì˜ êµ´ë ˆì— ê°‡íˆê³  ë§ì•˜ìŠµë‹ˆë‹¤.';
            } else if (type === 'giveup') {
                document.getElementById('m-icon').innerText = 'ğŸ³ï¸';
                document.getElementById('m-title').innerText = 'ê¸°ê¶Œí•˜ì…¨ìŠµë‹ˆë‹¤';
                document.getElementById('m-desc').innerText = 'ì§„ì‹¤ì€ ë•Œë¡œ ê°€í˜¹í•œ ë²•ì´ì£ .';
            }
        }

        function restartGame() {
            document.getElementById('modal').classList.replace('flex', 'hidden');
            document.getElementById('giveup-btn').classList.add('hidden');
            initGame();
        }

        document.addEventListener('contextmenu', e => e.preventDefault());
        document.onkeydown = e => { if (e.keyCode == 123 || (e.ctrlKey && e.shiftKey && e.keyCode == 73)) return false; };

        initGame();
    </script>
</body>
</html>
