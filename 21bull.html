<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TWENTY-ONE</title>
    <style>
        :root {
            --bg: #f8fafc;
            --card: #ffffff;
            --accent: #6366f1;
            --strike: #2ecc71;
            --ball: #f1c40f;
            --out: #e74c3c;
            --seg-off: #e2e8f0;
            --seg-on: #6366f1;
            --text-main: #1e293b;
            --text-sub: #64748b;
        }

        body {
            font-family: 'Pretendard', -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            /* ÎìúÎûòÍ∑∏ Î∞©ÏßÄ Ï∂îÍ∞Ä */
            user-select: none;
            -webkit-user-select: none;
        }

        .container {
            max-width: 550px;
            width: 100%;
            background: var(--card);
            padding: 40px;
            border-radius: 32px;
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.05), 0 10px 10px -5px rgba(0,0,0,0.02);
            text-align: center;
        }

        h1 { 
            font-size: 2.5rem; 
            font-weight: 900; 
            margin: 0; 
            background: linear-gradient(90deg, #6366f1, #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle { color: var(--text-sub); font-size: 1rem; margin-top: 8px; font-weight: 500; }
        .hint { color: var(--accent); font-size: 0.85rem; margin-top: 20px; font-weight: 600; opacity: 0.8; }

        .game-board {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            padding: 20px;
            background: #f1f5f9;
            border-radius: 24px;
        }

        .slot-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
        }

        .indicator {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #cbd5e1;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 800;
            font-size: 14px;
            color: white;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .indicator.s { background: var(--strike); box-shadow: 0 4px 12px rgba(46, 204, 113, 0.4); }
        .indicator.b { background: var(--ball); box-shadow: 0 4px 12px rgba(241, 196, 15, 0.4); }
        .indicator.o { background: var(--out); box-shadow: 0 4px 12px rgba(231, 76, 60, 0.4); }

        .slot {
            width: 90px;
            height: 140px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
        }
        .slot:hover { border-color: var(--accent); transform: translateY(-2px); }

        .segment-display { position: relative; width: 40px; height: 80px; transform: scale(1.2); }
        .seg { position: absolute; background: var(--seg-off); border-radius: 10px; transition: 0.2s; }
        .seg.a { top: 0; left: 5px; width: 30px; height: 5px; }
        .seg.b { top: 5px; right: 0; width: 5px; height: 30px; }
        .seg.c { bottom: 5px; right: 0; width: 5px; height: 30px; }
        .seg.d { bottom: 0; left: 5px; width: 30px; height: 5px; }
        .seg.e { bottom: 5px; left: 0; width: 5px; height: 30px; }
        .seg.f { top: 5px; left: 0; width: 5px; height: 30px; }
        .seg.g { top: 37px; left: 5px; width: 30px; height: 5px; }
        .seg.on { background: var(--seg-on); box-shadow: 0 0 10px rgba(99, 102, 241, 0.3); }

        .pool-container { margin-top: 30px; }
        .pool-title { font-size: 0.85rem; color: var(--text-sub); font-weight: 700; margin-bottom: 12px; }
        .switch-pool {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            min-height: 80px;
            padding: 20px;
            background: #f8fafc;
            border: 2px dashed #e2e8f0;
            border-radius: 24px;
        }

        .switch {
            width: 55px;
            height: 55px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 14px;
            cursor: grab;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
            transition: 0.2s;
        }

        .controls { margin-top: 40px; display: flex; gap: 15px; }
        button {
            flex: 1;
            padding: 18px;
            border: none;
            border-radius: 16px;
            font-size: 1rem;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.2s;
        }
        #play-btn { background: var(--accent); color: white; box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.3); }
        .reset-btn { background: #e2e8f0; color: #475569; }

        #chance-info { font-weight: 700; color: var(--text-sub); margin-bottom: 5px; }
    </style>
</head>
<body oncontextmenu="return false;"> <div class="container">
    <h1>TWENTY-ONE</h1>
    <div class="subtitle">Bulls and Cows</div>
    <div class="hint">üí° Ïà´ÏûêÎ•º Îã§Ïãú ÌÅ¥Î¶≠ÌïòÎ©¥ Ïû¨Î∞∞ÏπòÌï† Ïàò ÏûàÏäµÎãàÎã§.</div>

    <div class="game-board">
        <div class="slot-wrapper">
            <div class="indicator" id="ind-0"></div>
            <div class="slot" id="slot-0" data-index="0" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="clearSlot(0)"></div>
        </div>
        <div class="slot-wrapper">
            <div class="indicator" id="ind-1"></div>
            <div class="slot" id="slot-1" data-index="1" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="clearSlot(1)"></div>
        </div>
        <div class="slot-wrapper">
            <div class="indicator" id="ind-2"></div>
            <div class="slot" id="slot-2" data-index="2" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="clearSlot(2)"></div>
        </div>
        <div class="slot-wrapper">
            <div class="indicator" id="ind-3"></div>
            <div class="slot" id="slot-3" data-index="3" ondrop="drop(event)" ondragover="allowDrop(event)" onclick="clearSlot(3)"></div>
        </div>
    </div>

    <div id="chance-info">CHANCES LEFT: 5</div>

    <div class="pool-container">
        <div class="pool-title">AVAILABLE COMPONENTS</div>
        <div class="switch-pool" id="pool" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </div>

    <div class="controls">
        <button id="play-btn" onclick="playBall()">PLAY BALL</button>
        <button class="reset-btn" onclick="resetGame()">RESET</button>
    </div>
</div>

<script>
    /* --- SECURITY BLOCK --- */
    // 1. Îã®Ï∂ïÌÇ§ Ï∞®Îã® (F12, Ctrl+U, Ctrl+Shift+I Îì±)
    document.addEventListener('keydown', function(e) {
        if (e.keyCode == 123 || 
            (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74)) || 
            (e.ctrlKey && e.keyCode == 85)) {
            e.preventDefault();
            alert("Î≥¥ÏïàÏùÑ ÏúÑÌï¥ Í∞úÎ∞úÏûê ÎèÑÍµ¨ Î∞è ÏÜåÏä§ Î≥¥Í∏∞Î•º Ï†úÌïúÌï©ÎãàÎã§.");
            return false;
        }
    });

    // 2. Í∞úÎ∞úÏûê ÎèÑÍµ¨ Í∞êÏßÄ (Ï∞Ω ÌÅ¨Í∏∞ Î≥ÄÌôî Î∞è ÎîîÎ≤ÑÍ±∞ Ï≤¥ÌÅ¨)
    let devtoolsOpen = false;
    const element = new Image();
    Object.defineProperty(element, 'id', {
        get: function() {
            devtoolsOpen = true;
            location.reload(); // ÎèÑÍµ¨ Ïó¥Î©¥ Í∞ïÏ†ú ÏÉàÎ°úÍ≥†Ïπ®
        }
    });
    console.log('%c', element);


    const _0x4d2a = "R09ORUNPTE9SUw=="; 
    const SEG_DATA = {
        '0': [['a','b','f'], ['c','d','e']],
        '2': [['a','b','g'], ['g','e','d']],
        '3': [['a','b','g'], ['g','c','d']],
        '4': [['f','g','b'], ['g','b','c']],
        '5': [['a','f','g'], ['g','c','d']],
        '6': [['a','f','g'], ['e','d','c']],
        '7': [['a','b','c']],
        '9': [['a','b','f'], ['g','c','d']]
    };

    let target = [];
    let chances = 5;
    let currentSlots = [[], [], [], []];

    function init() {
        const others = ['0', '2', '3', '4', '5', '6', '9'].sort(() => Math.random() - 0.5).slice(0, 3);
        target = [...others, '7'].sort(() => Math.random() - 0.5);
        const pool = document.getElementById('pool');
        pool.innerHTML = '';
        let allSwitches = [];
        target.forEach(n => {
            SEG_DATA[n].forEach(segs => allSwitches.push({ id: 'sw-' + Math.random().toString(36).substr(2, 5), segs }));
        });
        allSwitches.sort(() => Math.random() - 0.5).forEach(sw => {
            const el = document.createElement('div');
            el.className = 'switch';
            el.draggable = true;
            el.id = sw.id;
            el.dataset.segs = JSON.stringify(sw.segs);
            el.innerHTML = renderSegIcon(sw.segs, 0.4);
            el.ondragstart = (e) => e.dataTransfer.setData("text", e.target.id);
            pool.appendChild(el);
        });
        updateDisplay();
    }

    function renderSegIcon(activeSegs, scale = 1) {
        let html = `<div class="segment-display" style="transform: scale(${scale})">`;
        ['a','b','c','d','e','f','g'].forEach(s => {
            html += `<div class="seg ${s} ${activeSegs.includes(s) ? 'on' : ''}"></div>`;
        });
        return html + '</div>';
    }

    function allowDrop(e) { e.preventDefault(); }

    function drop(e) {
        e.preventDefault();
        const id = e.dataTransfer.getData("text");
        const el = document.getElementById(id);
        const targetSlot = e.target.closest('.slot');
        if (targetSlot) {
            const idx = targetSlot.dataset.index;
            if (currentSlots[idx].length < 2) {
                currentSlots[idx].push({ id: el.id, segs: JSON.parse(el.dataset.segs) });
                el.style.display = 'none';
                updateDisplay();
            }
        }
    }

    function clearSlot(idx) {
        currentSlots[idx].forEach(item => {
            const el = document.getElementById(item.id);
            el.style.display = 'flex';
        });
        currentSlots[idx] = [];
        document.getElementById(`ind-${idx}`).className = 'indicator';
        document.getElementById(`ind-${idx}`).innerText = '';
        updateDisplay();
    }

    function updateDisplay() {
        for (let i = 0; i < 4; i++) {
            const combined = [...new Set(currentSlots[i].flatMap(s => s.segs))];
            document.getElementById(`slot-${i}`).innerHTML = renderSegIcon(combined, 1.2);
        }
    }

    function playBall() {
        let guess = currentSlots.map(slot => {
            const combined = [...new Set(slot.flatMap(s => s.segs))].sort().join('');
            for (let num in SEG_DATA) {
                const targetMatch = [...new Set(SEG_DATA[num].flat())].sort().join('');
                if (combined === targetMatch) return num;
            }
            return null;
        });

        if (guess.includes(null)) {
            alert("Î™®Îì† ÏûêÎ¶¨Ïóê Ïä§ÏúÑÏπòÎ•º Ï°∞Ìï©Ìï¥ Ïà´ÏûêÎ•º ÏôÑÏÑ±Ìï¥Ï£ºÏÑ∏Ïöî!");
            return;
        }

        let strikeCount = 0;
        guess.forEach((num, i) => {
            const ind = document.getElementById(`ind-${i}`);
            if (num === target[i]) {
                ind.className = 'indicator s'; ind.innerText = 'S';
                strikeCount++;
            } else if (target.includes(num)) {
                ind.className = 'indicator b'; ind.innerText = 'B';
            } else {
                ind.className = 'indicator o'; ind.innerText = 'O';
            }
        });

        if (strikeCount === 4) {
            // Base64Î•º Îã§Ïãú ÎîîÏΩîÎî©ÌïòÏó¨ Î≥¥Ïó¨Ï§å
            alert("Ï†ïÎãµÏûÖÎãàÎã§! ÏßÑÌñâ ÏΩîÎìú: " + atob(_0x4d2a));
            document.getElementById('play-btn').disabled = true;
        } else {
            chances--;
            document.getElementById('chance-info').innerText = `CHANCES LEFT: ${chances}`;
            if (chances <= 0) {
                alert(`Í≤åÏûÑ Ïò§Î≤Ñ! Ï†ïÎãµÏùÄ ${target.join('')}ÏòÄÏäµÎãàÎã§.`);
                resetGame();
            }
        }
    }

    function resetGame() {
        chances = 5;
        currentSlots = [[], [], [], []];
        document.getElementById('chance-info').innerText = `CHANCES LEFT: 5`;
        document.getElementById('play-btn').disabled = false;
        document.querySelectorAll('.indicator').forEach(i => {
            i.className = 'indicator'; i.innerText = '';
        });
        init();
    }

    window.onload = init;
</script>
</body>
</html>
